# Lecture 5: DC-DC変換回路のLTspiceシミュレーション

第5回講義「直流-直流変換（１）」で使用するLTspiceシミュレーションファイルです。

## 概要

本フォルダには、降圧チョッパー、昇圧チョッパー、昇降圧チョッパーの各回路のシミュレーションファイルが含まれています。各回路の動作原理を理解するために、定常状態における電圧・電流波形を観察できます。

## ファイル構成

### 1. 降圧チョッパー回路（Buck Converter）

#### `Fig3.1_back/` - 基本的な降圧チョッパー回路
教科書図3.1に対応する基本的な降圧チョッパー回路です。

**回路パラメータ：**
- 入力電圧: V1 = 10V
- インダクタンス: L1 = 30mH
- 負荷抵抗: R1 = 10Ω
- スイッチング周波数: fsw = 1kHz
- デューティ比: D = 0.5
- 理論出力電圧: Vout = D × Vin = 5V

**ファイル：**
- `back.asc` - LTspiceシミュレーション回路図
- `back.png` - 回路図のスクリーンショット
- `Fig.3.1.png` - 教科書の図

**シミュレーション設定：**
```
.tran 20m 20m 0 0.1u
.param fsw=1k      ; スイッチング周波数
.param Tsw=1/{fsw} ; スイッチング周期
.param D=0.5       ; デューティ比
```

**観察項目：**
- コイル電圧 vL(t) の波形（ON時：正、OFF時：負）
- コイル電流 iL(t) の三角波状の変動
- 負荷電圧 vR(t) とその平均値
- スイッチ電圧 Vsw の矩形波

---

#### `back_withC/` - コンデンサ付き降圧チョッパー回路
出力にコンデンサを追加して電圧リプルを低減した降圧チョッパー回路です。

**回路パラメータ：**
- 入力電圧: V1 = 10V
- インダクタンス: L1 = 30mH
- コンデンサ: C1 = 100μF
- 負荷抵抗: R1 = 10Ω
- スイッチング周波数: fsw = 1kHz
- デューティ比: D = 0.5

**ファイル：**
- `back_withC.asc` - LTspiceシミュレーション回路図
- `back_withC.png` - 回路図のスクリーンショット

**観察項目：**
- コンデンサによる出力電圧の平滑化効果
- 出力電圧リプルの低減
- コンデンサ電流の波形

---

### 2. 昇圧チョッパー回路（Boost Converter）

#### `Fig.3.20_boost/` - 昇圧チョッパー回路
教科書図3.20に対応する昇圧チョッパー回路です。入力電圧より高い出力電圧を得ます。

**回路パラメータ：**
- 入力電圧: V1 = 5V
- インダクタンス: L1 = 700μH
- コンデンサ: C1 = 500μF
- 負荷抵抗: R1 = 28.8Ω
- スイッチング周波数: fsw = 20kHz
- デューティ比: D = 0.583
- 理論出力電圧: Vout = Vin/(1-D) = 5/(1-0.583) = 12V

**ファイル：**
- `boost.asc` - LTspiceシミュレーション回路図
- `boost.png` - 回路図のスクリーンショット
- `Fig.3.20.png` - 教科書の図

**シミュレーション設定：**
```
.tran 1000m 1000m 999m 10u
.param fsw=20k     ; スイッチング周波数
.param Tsw=1/{fsw} ; スイッチング周期
.param D=0.583     ; デューティ比
```

**観察項目：**
- ON時：コイルへのエネルギー蓄積（コイル電流の増加）
- OFF時：コイルから出力へのエネルギー放出（コイル電流の減少）
- 出力電圧が入力電圧より高くなることの確認
- コンデンサによる出力電圧の平滑化

---

### 3. 昇降圧チョッパー回路（Buck-Boost Converter）

#### `Fig.3.25(a)_back_boost_back/` - 昇降圧チョッパー回路（降圧動作）
教科書図3.25(a)に対応する昇降圧チョッパー回路の降圧動作（D < 0.5）です。

**回路パラメータ：**
- 入力電圧: V1 = 12V
- インダクタンス: L1 = 700μH
- コンデンサ: C1 = 500μF
- 負荷抵抗: R1 = 5Ω
- スイッチング周波数: fsw = 20kHz
- デューティ比: D = 0.2941
- 理論出力電圧: Vout = D/(1-D) × Vin = 0.2941/(1-0.2941) × 12 = 5V

**ファイル：**
- `back_boost_back.asc` - LTspiceシミュレーション回路図
- `back_boost_back.png` - 回路図のスクリーンショット
- `Fig.3.25.png` - 教科書の図

**シミュレーション設定：**
```
.tran 500m 500m 499m 0.2u
.param fsw=20k      ; スイッチング周波数
.param Tsw=1/{fsw}  ; スイッチング周期
.param D=0.2941     ; デューティ比
```

**観察項目：**
- D < 0.5 での降圧動作
- 出力電圧の極性（入力と同じ）
- コイル電流の連続モード動作

---

#### `Fig.3.25(b)_back_boost_boost/` - 昇降圧チョッパー回路（昇圧動作）
教科書図3.25(b)に対応する昇降圧チョッパー回路の昇圧動作（D > 0.5）です。

**回路パラメータ：**
- 入力電圧: V1 = 5V
- インダクタンス: L1 = 700μH
- コンデンサ: C1 = 500μF
- 負荷抵抗: R1 = 28.8Ω
- スイッチング周波数: fsw = 20kHz
- デューティ比: D = 0.7059
- 理論出力電圧: Vout = D/(1-D) × Vin = 0.7059/(1-0.7059) × 5 = 12V

**ファイル：**
- `back_boost_boost.asc` - LTspiceシミュレーション回路図
- `back_boost_boost.png` - 回路図のスクリーンショット
- `Fig.3.25.png` - 教科書の図

**シミュレーション設定：**
```
.tran 500m 500m 499m 0.2u
.param fsw=20k      ; スイッチング周波数
.param Tsw=1/{fsw}  ; スイッチング周期
.param D=0.7059     ; デューティ比
```

**観察項目：**
- D > 0.5 での昇圧動作
- 出力電圧が入力電圧より高くなることの確認
- コイル電流の連続モード動作

---

### 4. 演習用ファイル

#### `ensyu_back/` - 降圧チョッパー演習
降圧チョッパー回路の演習用ファイルです。パラメータを変更して動作を確認できます。

#### `ensyu_back2/` - 降圧チョッパー演習2
降圧チョッパー回路の演習用ファイルです（条件2）。

#### `ensyu_back3/` - 降圧チョッパー演習3
降圧チョッパー回路の演習用ファイルです（条件3）。

---

## LTspiceの使い方

### シミュレーションの実行方法

1. LTspiceで `.asc` ファイルを開く
2. メニューから「Simulate」→「Run」を選択、またはF9キーを押す
3. 波形ビューアで測定したい素子をクリックして波形を表示

### 主な測定項目

- **電圧測定**: 素子または配線をクリック
- **電流測定**: 素子の本体部分をクリック
- **電力測定**: Altキーを押しながら素子をクリック

### パラメータの変更方法

各シミュレーションファイルには、以下のパラメータが定義されています：

```spice
.param fsw=1k      ; スイッチング周波数
.param Tsw=1/{fsw} ; スイッチング周期
.param D=0.5       ; デューティ比
```

これらの値を変更することで、異なる条件でのシミュレーションが可能です。

---

## 理論値との比較

各回路の出力電圧は、以下の式で計算できます：

### 降圧チョッパー
```
Vout = D × Vin
```

### 昇圧チョッパー
```
Vout = Vin / (1 - D)
```

### 昇降圧チョッパー
```
Vout = (D / (1 - D)) × Vin
```

シミュレーション結果と理論値を比較し、両者が一致することを確認してください。

---

## 注意事項

1. **定常状態の確認**
   各シミュレーションは、定常状態に到達するまで十分な時間をシミュレートしています。最後の数周期の波形を観察してください。

2. **理想素子の使用**
   本シミュレーションでは、理想スイッチと理想ダイオードを使用しています。実際の回路では、素子の損失により効率が低下します。

3. **連続モード動作**
   すべてのシミュレーションは、コイル電流が常に正（連続）である連続モード（CCM）で動作するように設計されています。

4. **時定数の確認**
   LCフィルタの時定数は、スイッチング周期よりも十分大きく設定されています。

---

## 学習目標

このシミュレーションを通じて、以下を理解してください：

1. 各チョッパー回路の基本構成と動作原理
2. スイッチのON/OFF時における等価回路
3. コイル電圧の電圧-秒バランスと出力電圧の関係
4. デューティ比による出力電圧の制御
5. コイル電流のリプルと平均値
6. コンデンサによる出力電圧の平滑化効果

---

## 参考資料

- 講義資料「パワーエレクトロニクス 第5回 直流-直流変換（１）」
- 教科書 第3章「DC-DCコンバータ」

---

## 更新履歴

- 2024-10-30: 初版作成
