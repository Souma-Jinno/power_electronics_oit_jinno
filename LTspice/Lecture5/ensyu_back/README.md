# 演習1: 降圧チョッパー回路の負荷変動特性

降圧チョッパー回路において、負荷抵抗を変化させた際の電圧・電流特性を観察する演習問題です。

## 学習目標

- 負荷抵抗の変化がコイル電流リプルに与える影響を理解する
- 出力電圧が負荷によらず一定であることを確認する
- 負荷電流の変化を観察し、オームの法則との整合性を確認する
- 連続導通モード（CCM）と不連続導通モード（DCM）の境界を理解する

## 回路構成

### 回路パラメータ

| 素子 | 記号 | 値 |
|------|------|-----|
| 入力電圧 | V1 | 10 V |
| インダクタンス | L1 | 30 mH |
| **負荷抵抗** | **Rx** | **10 Ω / 100 Ω / 500 Ω** (パラメトリック) |
| スイッチング周波数 | fsw | 1 kHz |
| デューティ比 | D | 0.5 |

### 理論出力電圧

デューティ比 D = 0.5 の降圧チョッパーの出力電圧：

```
Vout = D × Vin = 0.5 × 10 = 5 V
```

### 負荷電流の理論値

各負荷抵抗における出力電流（オームの法則）：

| 負荷抵抗 Rx | 出力電流 Iout | 出力電力 Pout |
|------------|-------------|--------------|
| 10 Ω | 5 / 10 = 0.5 A | 2.5 W |
| 100 Ω | 5 / 100 = 0.05 A | 0.25 W |
| 500 Ω | 5 / 500 = 0.01 A | 0.05 W |

## シミュレーション設定

```spice
.tran 20m 20m 0 0.1u
.param fsw=1k        ; スイッチング周波数 1kHz
.param Tsw=1/{fsw}   ; スイッチング周期 1ms
.param D=0.5         ; デューティ比 50%
.step param Rx list 10 100 500
```

### パラメトリック解析

`.step param Rx list 10 100 500` により、3種類の負荷抵抗でシミュレーションが自動的に実行されます：
- Rx = 10Ω（重負荷）
- Rx = 100Ω（中負荷）
- Rx = 500Ω（軽負荷）

## 観察項目

### 1. 出力電圧 (Vout)

**期待される結果:**
- すべての負荷条件で約 5 V
- 負荷によらず一定の電圧が維持される
- リプルの大きさが負荷によって変化する可能性がある

**確認ポイント:**
- 定常状態での平均電圧値
- リプル電圧の大きさ

### 2. コイル電流 (IL)

**期待される結果:**

| 負荷抵抗 Rx | 平均電流 | リプル電流 ΔiL | 備考 |
|-----------|---------|--------------|------|
| 10 Ω | ≈ 0.5 A | 小さい | 重負荷、CCM |
| 100 Ω | ≈ 0.05 A | 中程度 | 中負荷、CCM |
| 500 Ω | ≈ 0.01 A | 大きい | 軽負荷、DCMの可能性 |

**リプル電流の計算:**

降圧チョッパーのコイル電流リプルは：

```
ΔiL = (Vin - Vout) × D × T / L
    = (10 - 5) × 0.5 × 0.001 / 0.03
    = 2.5 × 10⁻³ / 0.03
    ≈ 0.083 A = 83 mA
```

**重要な観察:**
- 負荷抵抗が大きい（軽負荷）ほど、平均電流に対するリプルの割合が大きくなる
- Rx = 500Ωでは、リプル電流が平均電流に近くなり、不連続導通モード（DCM）になる可能性がある

### 3. ダイオード電流 (ID)

- スイッチOFF時にのみ流れる
- コイル電流と同じ波形（OFF期間）
- 負荷が重いほど大きい

### 4. 入力電流 (Iin)

- スイッチON時にのみ流れる
- パルス状の電流
- 平均値は出力電力に対応

## 連続導通モード (CCM) と不連続導通モード (DCM)

### 境界条件

コイル電流が0にならない条件（CCM）：

```
ΔiL / 2 < Iavg
```

各負荷での判定：

| 負荷抵抗 Rx | 平均電流 Iavg | ΔiL / 2 | 判定 |
|-----------|-------------|---------|------|
| 10 Ω | 0.5 A | 0.0415 A | CCM (0.5 > 0.0415) |
| 100 Ω | 0.05 A | 0.0415 A | CCM (0.05 > 0.0415) |
| 500 Ω | 0.01 A | 0.0415 A | **DCM** (0.01 < 0.0415) |

**Rx = 500Ω では不連続導通モードになる可能性が高い**

## 実験課題

### 課題1: 出力電圧の確認

各負荷条件で出力電圧を測定し、理論値（5V）と比較せよ。

### 課題2: コイル電流の観察

各負荷条件でのコイル電流波形を観察し、以下を確認せよ：
1. 平均電流値が理論値と一致するか
2. リプル電流が計算値（83mA）と一致するか
3. 電流が0に達する条件（DCM）はあるか

### 課題3: 連続/不連続モードの判定

各負荷条件で、連続導通モード（CCM）か不連続導通モード（DCM）かを判定せよ。

### 課題4: 電力効率の考察

入力電力と出力電力を比較し、効率を考察せよ（理想スイッチとダイオードを使用しているため、効率はほぼ100%になるはず）。

## 発展課題

### 1. 臨界負荷抵抗の計算

CCMとDCMの境界となる臨界負荷抵抗を計算せよ。

ヒント：
```
Iavg = ΔiL / 2 となる条件
Vout / Rcrit = ΔiL / 2
```

### 2. インダクタンス値の影響

インダクタンス L を変化させて（例: 10mH, 30mH, 100mH）、臨界負荷抵抗がどう変化するか確認せよ。

### 3. 周波数の影響

スイッチング周波数を変化させて（例: 1kHz, 10kHz, 100kHz）、リプル電流がどう変化するか確認せよ。

## 比較実験

### ensyu_back2 との比較

[ensyu_back2](../ensyu_back2/) では、同じ回路でスイッチング周波数を **10 kHz** に設定しています。両方のシミュレーションを実行し、周波数の違いによる影響を比較してください。

### ensyu_back3 との比較

[ensyu_back3](../ensyu_back3/) では、同じ回路でインダクタンスを **300 mH**（10倍）に設定しています。両方のシミュレーションを実行し、インダクタンス値の違いによる影響を比較してください。

## ヒント

### 波形の見方

1. **複数のトレースが表示される**: パラメトリック解析により、3つの負荷条件の波形が同時に表示されます
2. **色の違い**: 各トレースは異なる色で表示されます
3. **凡例の確認**: どの色がどの負荷条件か、凡例（legend）で確認できます

### 測定方法

- **平均値**: 定常状態の波形にカーソルを合わせて読み取る
- **リプル**: 波形の最大値と最小値の差を測定する
- **周期**: スイッチング周期 T = 1ms を確認する

## 関連ファイル

- 基本的な降圧チョッパー: [../Fig3.1_back/](../Fig3.1_back/)
- コンデンサ付き降圧チョッパー: [../back_withC/](../back_withC/)
- 演習2（周波数変化）: [../ensyu_back2/](../ensyu_back2/)
- 演習3（インダクタンス変化）: [../ensyu_back3/](../ensyu_back3/)

---

[← Lecture5トップに戻る](../)
