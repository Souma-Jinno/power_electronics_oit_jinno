# ツェナーダイオードを用いたリニアレギュレータ

## 概要

ツェナーダイオード（Zener Diode）を基準電圧源として使用したリニアレギュレータのシミュレーションです。基本リニアレギュレータ回路に実用的な基準電圧源を追加した構成です。

## 回路構成

### 主要素子
- **電源電圧**: V1 = 10 V
- **ツェナーダイオード**: D1 (1N750, V_Z = 4.7 V)
- **電流制限抵抗**: R2 = 400 Ω
- **トランジスタ**: Q1 (2N2222, npn型)
- **負荷抵抗**: R1 = {R} Ω（パラメータスイープ）

### 回路の特徴
- ツェナーダイオードが安定した基準電圧を生成
- 抵抗 R2 がツェナーダイオードに適切な逆電流を供給
- 負荷変動に対する出力電圧の安定性を確認

## 動作原理

### ツェナーダイオードの動作
1. **逆バイアス動作**: ツェナーダイオードは逆向きに接続される
2. **ツェナーブレークダウン**: 逆電圧がツェナー電圧 V_Z に達すると電流が流れる
3. **電圧安定化**: 電流が変化してもツェナー電圧 V_Z はほぼ一定

### 1N750の特性
- **ツェナー電圧**: V_Z = 4.7 V
- **最小ツェナー電流**: I_Z(min) ≈ 5 mA
- **最大ツェナー電流**: I_Z(max) ≈ 27 mA（定格電力 500mW）

### 基準電圧回路の設計

**ツェナーダイオードに流れる電流** I_Z の計算:
```
V_in = 10 V, V_Z = 4.7 V, R2 = 400 Ω と仮定

I_total = (V_in - V_Z) / R2
        = (10 - 4.7) / 400
        = 13.25 mA
```

この電流がツェナーダイオードとベースに分かれます：
```
I_Z = I_total - I_B
```

### 出力電圧の計算
```
V_out = V_Z - V_BE
      = 4.7 - 0.7
      = 4.0 V（理論値）
```

## シミュレーション設定

### 過渡解析
```
.tran 1m
```
- 解析時間：1 ms

### パラメータスイープ
```
.step param R list 10 50 100
```
- 負荷抵抗 R を 10Ω、50Ω、100Ω と変化させる

## 理論計算

### R = 10Ω の場合

**出力電圧**（V_BE = 0.7 V、V_Z = 4.7 V と仮定）:
```
V_out = V_Z - V_BE = 4.7 - 0.7 = 4.0 V
```

**出力電流**:
```
I_out = V_out / R = 4.0 / 10 = 0.4 A
```

**コレクタ電流**:
```
I_C ≈ I_out = 0.4 A
```

**ベース電流**（h_FE = 100 と仮定）:
```
I_B = I_C / h_FE = 0.4 / 100 = 4 mA
```

**R2に流れる電流**:
```
I_R2 = (V_in - V_Z) / R2 = (10 - 4.7) / 400 = 13.25 mA
```

**ツェナーダイオードに流れる電流**:
```
I_Z = I_R2 - I_B = 13.25 - 4 = 9.25 mA
```

これは 1N750 の動作範囲内（5 ~ 27 mA）です。

## 観察項目

### 確認すべき波形
1. **V(n003)**: 出力電圧
2. **V(n002)**: ツェナー電圧（基準電圧）
3. **I(R1)**: 負荷電流
4. **I(D1)**: ツェナーダイオードの電流
5. **IC(Q1)**: コレクタ電流
6. **IB(Q1)**: ベース電流

### 負荷変動時の観察ポイント
- 負荷抵抗を変化させたときの出力電圧の変動
- ツェナー電圧の安定性
- V_BE の変化

## 負荷変動特性の評価

### 負荷レギュレーション（Load Regulation）

負荷電流が変化したときの出力電圧の変化率：
```
Load Regulation = ΔV_out / ΔI_out × 100%
```

理想的には 0% に近いほど良い。

### 予想される結果

| 負荷抵抗 R (Ω) | 出力電流 I_out (A) | 出力電圧 V_out (V) | 電圧変動 ΔV (V) |
|---------------|-------------------|-------------------|----------------|
| 10            | ~0.4              | ~4.0              | 基準           |
| 50            | ~0.08             | ~4.1              | +0.1           |
| 100           | ~0.04             | ~4.15             | +0.15          |

負荷電流が減少すると V_BE が減少し、出力電圧がわずかに上昇します。

## 実験課題

### 基礎課題
1. 各負荷抵抗値での出力電圧を測定し、負荷レギュレーションを計算せよ
2. ツェナー電圧 V_Z の実測値を求めよ
3. 負荷電流とツェナーダイオード電流の関係を確認せよ

### 発展課題
1. R2 の値を変化させて、ツェナーダイオード電流の影響を調べよ
   - R2 が小さすぎる → ツェナー電流過大（発熱）
   - R2 が大きすぎる → ツェナー電流不足（電圧不安定）

2. 異なるツェナー電圧のダイオードを使用した場合の出力電圧を計算せよ
   - 1N4733A (V_Z = 5.1 V)
   - 1N4735A (V_Z = 6.2 V)

3. 最大負荷電流を求めよ
   - ツェナー電流が最小値（~5 mA）を下回らない条件

## この回路の改善点

### 基本回路からの改善
1. **実用的な基準電圧源**
   - ツェナーダイオードによる安定した基準電圧
   - 理想電圧源が不要

2. **部品点数が少ない**
   - 簡単な回路構成
   - 低コスト

### まだ残る問題点
1. **負荷変動の影響**
   - 負荷電流の変化により V_BE が変化
   - 出力電圧が変動する（0.1 ~ 0.2 V程度）

2. **ツェナーダイオードのノイズ**
   - ツェナーブレークダウンによるノイズ
   - 高精度用途には不向き

3. **温度特性**
   - ツェナー電圧の温度係数
   - V_BE の温度依存性

## 次のステップ

出力電圧の安定性をさらに向上させるために：
- **オペアンプによるフィードバック制御**（seriese_regurator_opamp）を使用
- 負荷変動に対して自動的に調整
- 高精度な電圧レギュレーションを実現

## 参考：ツェナーダイオードの選定

### ツェナー電圧の選定基準
1. 出力電圧 + V_BE < V_Z < V_in
2. 一般的な選定: V_Z = V_out + 1.0 ~ 2.0 V

### 電流制限抵抗 R2 の設計
```
R2 = (V_in - V_Z) / (I_Z + I_B_max)

ここで：
- I_Z: ツェナーダイオードの動作電流（5 ~ 20 mA程度）
- I_B_max: 最大負荷時のベース電流
```

### 消費電力の確認
```
P_Z = V_Z × I_Z < P_Z(max)

1N750の場合：P_Z(max) = 500 mW
```
