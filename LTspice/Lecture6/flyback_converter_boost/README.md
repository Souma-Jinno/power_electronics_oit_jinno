# フライバックコンバータ（昇圧動作、D > 0.5）

フライバックコンバータの昇圧動作をシミュレーションします。変圧器を用いた絶縁型昇降圧コンバータで、デューティ比が0.5より大きい場合は昇圧動作となります。

## 学習目標

- フライバックコンバータの昇圧動作を理解する
- ON時のエネルギー蓄積、OFF時のエネルギー転送を確認する
- 昇圧動作（D > 0.5）の特性を理解する
- 降圧動作（D < 0.5）との違いを理解する

## 回路構成

### 回路パラメータ

| 素子 | 記号 | 値 | 備考 |
|------|------|-----|------|
| 入力電圧 | V1 | 5 V | |
| **1次側インダクタンス** | **L1** | **0.7 mH** | |
| **2次側インダクタンス** | **L2** | **0.7 mH** | |
| 結合係数 | K1 | 1.0 | 理想結合 |
| 出力コンデンサ | C1 | 500 μF | |
| 負荷抵抗 | R2 | 28.8 Ω | |
| **デューティ比** | **D** | **0.7059** | D > 0.5（昇圧） |
| スイッチング周波数 | fsw | 20 kHz | |

### 巻数比

```
K1 L1 L2 1
n1:n2 = 1:1（L1 = L2）
```

## 理論解析

### 出力電圧の導出

フライバックコンバータの出力電圧は：

```
Vout = (n2/n1) × (D/(1-D)) × Vin
```

巻数比が 1:1、D = 0.7059 の場合：

```
Vout = 1 × (0.7059/(1-0.7059)) × 5 V
     = (0.7059/0.2941) × 5 V
     = 2.4 × 5 V
     = 12 V
```

### D > 0.5 の意味

デューティ比が0.5より大きい場合：

```
D/(1-D) > 0.5/0.5 = 1
```

したがって、

```
Vout > Vin  （昇圧動作）
```

**今回の例:**
```
D/(1-D) = 0.7059/0.2941 = 2.4 > 1
Vout = 12 V > 5 V（入力）
```

### D = 0.7059 の計算根拠

目標出力電圧 Vout = 12 V を得るためのデューティ比：

```
Vout = (D/(1-D)) × Vin
12 = (D/(1-D)) × 5
D/(1-D) = 2.4
D = 2.4 × (1-D)
D = 2.4 - 2.4D
3.4D = 2.4
D = 0.7059
```

## 動作原理

### ON時（スイッチ閉）- エネルギー蓄積フェーズ

```
1. 入力電源 → スイッチ → L1 → GND
2. L1に磁気エネルギーが蓄積される
3. 2次側ダイオードD2は逆バイアス（電流流れず）
4. C1から負荷に電力供給（コンデンサの放電）
```

**1次側インダクタ電流の増加:**

```
dIL1/dt = Vin / L1
ΔIL1_on = (Vin × ton) / L1
        = (5 V × 35.3 μs) / 0.7 mH
        ≈ 252 mA
```

**ON時間が長い（D = 0.7059）:**
- ON期間: 35.3 μs（周期の70.59%）
- 多くのエネルギーがL1に蓄積される

### OFF時（スイッチ開）- エネルギー転送フェーズ

```
1. L1の蓄積エネルギーが2次側に転送
2. L1 → L2（磁気結合） → D2 → C1 + R2 → GND
3. 2次側ダイオードD2が導通
4. C1に充電し、負荷に電力供給
```

**OFF時間が短い（1-D = 0.2941）:**
- OFF期間: 14.7 μs（周期の29.41%）
- 短時間で大きな電圧が誘導される

**2次側誘導電圧:**

```
V_L2 = (n2/n1) × (ton/toff) × Vin
     = 1 × (35.3/14.7) × 5
     ≈ 12 V
```

## エネルギー収支と昇圧メカニズム

### エネルギー蓄積（ON時）

```
E_stored = (1/2) × L1 × IL1_peak²
```

ON時間が長いため、大きなエネルギーが蓄積されます。

### エネルギー転送（OFF時）

蓄積された大きなエネルギーを短時間で放出するため、高い電圧が得られます：

```
電圧比 = ON時間 / OFF時間 = ton/toff
       = D/(1-D)
       = 0.7059/0.2941
       ≈ 2.4
```

これにより、入力電圧の2.4倍の出力電圧が得られます。

## シミュレーション設定

```spice
.model SW SW(Ron=1m Roff=1G Vt=0.01)
.model D_ideal D(Ron=0.0001 Roff=100G Vfwd=0 epsilon=1m revepsilon=1m)
.tran 500m 500m 499.83m 0.2u
.param fsw=20k
.param Tsw=1/{fsw}
.param D=0.7059
K1 L1 L2 1
```

### パラメータ説明

- **シミュレーション時間**: 500 ms（起動から定常状態まで）
- **表示範囲**: 499.83 ms ～ 500 ms（定常状態のみ）
- **スイッチング周期**: Tsw = 50 μs
- **ON時間**: ton = D × Tsw = 0.7059 × 50 μs ≈ 35.3 μs
- **OFF時間**: toff = (1-D) × Tsw ≈ 14.7 μs

## 観察項目

### 1. 出力電圧 V(C1)

**期待される結果:**
- **平均値**: 約12 V
- **リプル**: 11.991 ～ 12.024 V程度（約33 mV p-p）
- **定常状態**: 500 ms付近

**確認ポイント:**
- 理論値（12 V）との一致
- 入力電圧（5 V）より高い（昇圧確認）
- リプル電圧の大きさ

### 2. 1次側電流 I(L1)

**期待される波形:**
- **ON時**: 直線的に増加（0 ～ 1.8 A）
- **OFF時**: 急速に0に戻る
- **三角波**: 非連続（電流が0になる）

**ピーク電流の理論値:**

```
IL1_peak = (Vin × ton) / L1
         + 負荷に必要な電流に対応する成分
```

実際のシミュレーションでは約1.8 A程度のピークが観察されます。

### 3. 2次側電流 I(L2)

**期待される波形:**
- **ON時**: 0 A（ダイオード逆バイアス）
- **OFF時**: 負の大きな電流（-0.5 ～ -1.8 A程度）
- **パルス状**: OFF時のみ流れる

**重要な観察:**
- 2次側電流はOFF時のみ
- ON時に蓄積されたエネルギーがOFF時に集中して転送される
- ピーク電流が大きい（エネルギー転送期間が短いため）

### 4. インダクタ電圧 V(L1), V(L2)

**ON時:**
```
VL1 ≈ Vin = 5 V
VL2 ≈ 0 V（ダイオード逆バイアス）
```

**OFF時:**
```
VL1 ≈ -(ton/toff) × Vin（大きな負電圧）
    ≈ -2.4 × 5 = -12 V
VL2 ≈ 高い正電圧（出力側へ）
```

## 実験課題

### 課題1: 出力電圧の確認

理論計算した出力電圧（12 V）とシミュレーション結果を比較せよ。

### 課題2: デューティ比と出力電圧の関係

デューティ比を変化させて、出力電圧の変化を確認せよ：

| デューティ比 D | D/(1-D) | 理論出力電圧 | 動作モード |
|--------------|---------|-------------|----------|
| 0.6 | 1.5 | 7.5 V | 昇圧 |
| 0.7059 | 2.4 | 12 V | 昇圧 |
| 0.75 | 3.0 | 15 V | 昇圧 |
| 0.8 | 4.0 | 20 V | 昇圧 |

### 課題3: エネルギー転送の観察

1次側電流と2次側電流の波形から、エネルギー転送のタイミングと量を確認せよ：
- ON時: 長時間のエネルギー蓄積（低電圧×長時間）
- OFF時: 短時間のエネルギー転送（高電圧×短時間）

### 課題4: 降圧動作との比較

[flyback_converter_back](../flyback_converter_back/) と比較し、以下の違いを確認せよ：
- ON/OFF時間の比率
- ピーク電流の大きさ
- 出力電圧の大小

## 発展課題

### 1. D = 0.5 境界条件

D = 0.5 に設定して、昇圧も降圧もしない条件をシミュレーションせよ：
- 理論出力電圧: D/(1-D) × Vin = 1 × 5 = 5 V
- 入力と出力が同じ電圧になることを確認

### 2. 高昇圧比の限界

D = 0.9 などの高いデューティ比で、昇圧比の限界を探れ：
- 理論出力電圧は非常に高くなる
- 実際のシミュレーションでの問題点を観察
- 損失や部品の限界を考察

### 3. 負荷変動と出力安定性

負荷抵抗を変化させて、出力電圧の安定性を確認せよ：
- R2 = 10 Ω, 28.8 Ω, 50 Ω
- 軽負荷時の不連続モードへの移行を観察
- 重負荷時の出力電圧低下を観察

## フライバックコンバータ昇圧動作の特徴

### メリット

1. **高昇圧比**: デューティ比を高くすることで大きな昇圧が可能
2. **部品が少ない**: シンプルな構成
3. **絶縁**: 入力と出力が電気的に絶縁
4. **巻数比で調整可能**: 変圧器の巻数比でも昇圧比を変更可能

### デメリット

1. **大きな電流ストレス**: 特に2次側でピーク電流が大きい
2. **スイッチング損失**: 高いデューティ比で損失が増加
3. **出力リプルが大きい**: 短いOFF期間でエネルギー転送
4. **DCMになりやすい**: 軽負荷時

## 昇圧チョッパーとの比較

### 共通点

- 出力電圧 > 入力電圧
- ON時にエネルギー蓄積、OFF時に転送
- インダクタが重要な役割

### 相違点

| 項目 | 昇圧チョッパー | フライバック（昇圧） |
|------|------------|-----------------|
| 絶縁 | なし | あり |
| 電力転送 | 連続 | OFF時のみ |
| 出力式 | Vin/(1-D) | (D/(1-D))×Vin |
| 極性 | 同じ | 選択可能 |

## D = 0.5 での境界条件

デューティ比 D = 0.5 は、降圧と昇圧の境界です：

```
D < 0.5: Vout < Vin（降圧）
D = 0.5: Vout = Vin（等電圧）
D > 0.5: Vout > Vin（昇圧）
```

| D | D/(1-D) | 出力電圧（Vin=5V） |
|---|---------|------------------|
| 0.3 | 0.43 | 2.1 V（降圧） |
| 0.5 | 1.0 | 5.0 V（等電圧） |
| 0.7059 | 2.4 | 12 V（昇圧） |

## 教科書との対応

- **第6章 スライド36-40**: フライバックコンバータの回路構成と動作原理
- **スライド40**: 昇圧モードの定常状態波形
- **式(Vout = D/(1-D) × Vin)**: 出力電圧の関係式
- **デューティ比の意味**: D > 0.5で昇圧

## 関連ファイル

- フライバック（降圧）: [../flyback_converter_back/](../flyback_converter_back/)
- フォワードコンバータ: [../foward_converter/](../foward_converter/)
- 励磁電流（スイッチング）: [../exitation_current_switch/](../exitation_current_switch/)
- 非絶縁型昇降圧（昇圧）: [../../Lecture5/Fig.3.25(b)_back_boost_boost/](../../Lecture5/Fig.3.25(b)_back_boost_boost/)
- 非絶縁型昇圧: [../../Lecture5/Fig.3.20_boost/](../../Lecture5/Fig.3.20_boost/)

---

[← Lecture6トップに戻る](../)
