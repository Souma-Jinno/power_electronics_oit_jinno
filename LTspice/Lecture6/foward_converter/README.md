# フォワードコンバータ（絶縁型降圧DC-DCコンバータ）

フォワードコンバータの定常状態動作をシミュレーションします。変圧器を用いた絶縁型降圧コンバータです。

## 学習目標

- フォワードコンバータの動作原理を理解する
- 励磁電流のリセット回路の役割を理解する
- ON/OFF時のエネルギー転送メカニズムを確認する
- 出力電圧の導出と検証

## 回路構成

### 回路パラメータ

| 素子 | 記号 | 値 | 備考 |
|------|------|-----|------|
| 入力電圧 | V1 | 100 V | |
| **1次側励磁インダクタンス** | **L1** | **10 mH** | |
| **1次側リセット巻線** | **L3** | **10 mH** | 励磁電流リセット用 |
| **2次側漏れインダクタンス** | **L2** | **0.1 mH** | |
| 出力インダクタ | L4 | 1.0 mH | |
| 出力コンデンサ | C1 | 500 μF | |
| DCR（1次側） | R1 | 0.01 Ω | |
| 負荷抵抗 | R2 | 5 Ω | |
| **デューティ比** | **D** | **0.3** | |
| スイッチング周波数 | fsw | 20 kHz | |

### 巻数比

```
K1 L1 L3 L2 1
```

- L1: 1次側励磁インダクタンス（10 mH）
- L3: リセット巻線（10 mH）
- L2: 2次側漏れインダクタンス（0.1 mH）
- 結合係数: 1.0（理想変圧器）

**実効巻数比**: n1:n2 ≈ 10:1（L1/L2の比から推定）

## 理論解析

### 出力電圧の導出

フォワードコンバータの出力電圧は、降圧チョッパーと同様に：

```
Vout = (n2/n1) × D × Vin
```

巻数比が 10:1 の場合：

```
Vout = (1/10) × 0.3 × 100 V
     = 3 V
```

### リセット巻線の役割

**問題点**: スイッチOFF時、励磁電流が行き場を失う

**解決策**: リセット巻線L3とダイオードD1で励磁電流の経路を確保

**ON時の磁束**:
```
Φ = (Vin × ton) / (n1 × Ae)
```

**OFF時のリセット**:
```
リセット巻線L3を通じて励磁エネルギーを入力側に戻す
```

### 電流の流れ

**ON時**:
1. 入力 → スイッチ → L1（励磁） → L2 → D2 → L4 → 負荷
2. L1に励磁電流が流れる
3. L2から2次側に電力が転送される

**OFF時**:
1. L1の励磁電流 → L3 → D1 → 入力（エネルギー回生）
2. L4 → D3 → 負荷（還流電流）
3. C1が電圧を維持

## シミュレーション設定

```spice
.model SW SW(Ron=1m Roff=1G Vt=0.01)
.model D_ideal D(Ron=0.0001 Roff=100G Vfwd=0 epsilon=1m revepsilon=1m)
.tran 51m 51m 50.85m 0.1u
.param fsw=20k
.param Tsw=1/{fsw}
.param D=0.3
K1 L1 L3 L2 1
```

### パラメータ説明

- **シミュレーション時間**: 51 ms
- **表示範囲**: 50.85 ms ～ 51 ms（定常状態のみ）
- **スイッチング周期**: Tsw = 1/20kHz = 50 μs
- **ON時間**: D × Tsw = 0.3 × 50 μs = 15 μs
- **OFF時間**: (1-D) × Tsw = 35 μs

## 観察項目

### 1. 出力電圧 V(R2)

**期待される結果:**
- **平均値**: 約3 V
- **リプル**: 小さい（C1による平滑化）
- **範囲**: 2.995 ～ 2.996 V程度

**確認ポイント:**
- 理論値（3 V）との一致
- リプル電圧の大きさ

### 2. 出力インダクタ電流 I(L4)

**期待される波形:**
- **平均値**: Iout = Vout / R2 = 3V / 5Ω = 0.6 A
- **リプル**: 三角波状の変動
- **連続モード**: 電流が常に正（CCM）

**リプル電流の計算:**

ON時（D2導通）:
```
vL4 = (n2/n1)×Vin - Vout
    = 10 V - 3 V
    = 7 V
```

OFF時（D3導通）:
```
vL4 = -Vout = -3 V
```

リプル電流:
```
ΔiL4 = (vL4_on × ton) / L4
     = (7 V × 15 μs) / 1 mH
     = 105 mA
```

### 3. 1次側電流 -I(L1)

**期待される波形:**
- **ON時**: 励磁電流 + 負荷電流
- **OFF時**: リセット巻線を通じて減少
- **三角波**: 励磁電流成分

**励磁電流の変化:**

ON時:
```
ΔIm = (Vin × ton) / L1
    = (100 V × 15 μs) / 10 mH
    = 150 mA
```

### 4. 2次側電圧 V(L2端子)

**期待される波形:**
- **ON時**: (n2/n1) × Vin = 10 V
- **OFF時**: 0 V付近
- **矩形波**: デューティ比30%

## 実験課題

### 課題1: 出力電圧の確認

デューティ比を変化させて、出力電圧の変化を確認せよ：

| デューティ比 D | 理論出力電圧 |
|--------------|-------------|
| 0.2 | 2 V |
| 0.3 | 3 V |
| 0.4 | 4 V |
| 0.5 | 5 V |

### 課題2: リプル電流の測定

出力インダクタ電流のリプルを測定し、理論値と比較せよ：
- ピーク・トゥ・ピーク値を測定
- 理論値（約105 mA）と比較

### 課題3: 負荷変動

負荷抵抗R2を変化させて、出力電圧の安定性を確認せよ：
- R2 = 2.5 Ω, 5 Ω, 10 Ω
- 出力電圧と電流の変化を観察

### 課題4: リセット巻線の役割

ダイオードD1を削除してシミュレーションせよ：
- 励磁電流が蓄積する様子を観察
- リセット巻線の重要性を確認

## 発展課題

### 1. 巻数比の最適化

巻数比を変更して、同じ出力電圧を得るためのデューティ比を求めよ：
- 巻数比 5:1 → D = ?
- 巻数比 15:1 → D = ?

### 2. 出力フィルタの設計

目標リプル電圧（例: 10 mV以下）を達成するために必要な出力インダクタンスとコンデンサ容量を計算せよ。

### 3. 効率の計算

入力電力と出力電力を測定し、変換効率を計算せよ：
```
η = Pout / Pin × 100%
  = (Vout × Iout) / (Vin × Iin) × 100%
```

## フォワードコンバータの特徴

### メリット

1. **絶縁**: 入力と出力が電気的に絶縁
2. **降圧**: 高電圧入力から低電圧出力
3. **連続電流**: 2次側で連続的な電力転送
4. **低ノイズ**: ON時に電力転送（フライバックより）

### デメリット

1. **リセット巻線が必要**: 励磁電流のリセット
2. **部品点数が多い**: 複数のインダクタとダイオード
3. **デューティ比の制限**: D < 0.5（通常）

## フライバックコンバータとの比較

| 項目 | フォワード | フライバック |
|------|----------|------------|
| 電力転送 | ON時 | OFF時 |
| エネルギー蓄積 | 小（励磁のみ） | 大（L1に蓄積） |
| 部品点数 | 多 | 少 |
| 出力リプル | 小 | 大 |
| 適用 | 大電力 | 小～中電力 |

## 教科書との対応

- **第6章 スライド32-35**: フォワードコンバータの回路構成と動作原理
- **式(Vout = (n2/n1) × D × Vin)**: 出力電圧の関係式

## 関連ファイル

- 励磁電流（スイッチング）: [../exitation_current_switch/](../exitation_current_switch/)
- フライバック（降圧）: [../flyback_converter_back/](../flyback_converter_back/)
- フライバック（昇圧）: [../flyback_converter_boost/](../flyback_converter_boost/)

---

[← Lecture6トップに戻る](../)
